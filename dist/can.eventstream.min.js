!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("can"));else if("function"==typeof define&&define.amd)define(["can"],t);else{var a=t("object"==typeof exports?require("can"):e.can);for(var n in a)("object"==typeof exports?exports:e)[n]=a[n]}}(this,function(e){return function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function n(e){this.event=e[0],this.which=e[1],this.how=e[2],this.value=e[3],this.oldValue=e[4]}function r(e){switch(this.event=e[0],this.event.type){case"change":this.index=isNaN(e[1])?e[1]:+e[1],this.how=e[2],this.value="remove"===this.how?e[4]:e[3],this.oldValue=e[4];break;case"set":case"add":case"remove":this.index=e[2],this.how=this.event.type,this.value=e[1],this.oldValue=null;break;default:throw new Error("Unexpected can.List event: "+this.event.type)}}function o(e,t){var a=t.hasOwnProperty("which")?t.which:t.index;switch(t.how){case"set":e.attr(a,t.value);break;case"add":e.attr(a,t.value);break;case"remove":e.removeAttr(a);break;case"replace":e.attr(t.value,t.removeOthers);break;case void 0:console.warn("Missing event type on change event: ",t),e.attr(t);break;default:console.warn("Unexpected event type: ",t.how),e.attr(t)}}function s(e,t){var a=t.hasOwnProperty("which")||isNaN(t.index);if(a&&"replace"!==t.how)o(e,t);else switch(t.how){case"set":e.attr(t.index,t.value);break;case"add":t.value&&t.value.length||console.warn("'add' events sent to lists must have an array-like as their value"),e.splice.apply(e,[t.index,0].concat([t.value]));break;case"remove":e.splice(t.index,t.value?t.value.length:1);break;case"replace":t.hasOwnProperty("removeOthers")?e.attr(t.value,t.removeOthers):e.replace(t.value);break;case"splice":e.splice.apply(e,[t.index,t.howMany].concat(t.value));break;case void 0:console.warn("Missing event type on change event: ",t),e.replace(t.value);break;default:console.warn("Unexpected event type: ",t.how),e.replace(t.value)}}var i=a(1),c=i.bind;i.bind=function(e,t){return t?c.call(this,e,t):i.EventStream.bind(this,e||"change")};var u=i.delegate;i.delegate=function(e,t,a){return a?u.apply(this,arguments):i.EventStream.bind(this,t||"change",e)};var l=i.bindAndSetup;i.bindAndSetup=function(e,t){return t?l.apply(this,arguments):i.bind.call(this,e)};var p=i.Control.prototype.on;i.Control.prototype.on=function(e){return e&&i.EventStream.isEventStream(e)?i.EventStream.untilStream(e,i.bind.call(this,"destroyed")):p.apply(this,arguments)},i.Map.bind=i.Map.on=i.bindAndSetup;var v=i.Map.prototype.bind;i.Map.prototype.bind=function(){var e=void 0!==arguments[0]?arguments[0]:"change",t=arguments[1];return v.call(this,e,t)},i.Map.prototype.getEventValueForStream=function(e){switch(e[0]&&e[0].type){case"change":return new n(e);default:var t=e[0].target;return t._data&&t._data.hasOwnProperty(e[0].type)?e[1]:e}},i.List.prototype.getEventValueForStream=function(e){switch(e[0]&&e[0].type){case"change":case"set":case"add":case"remove":return new r(e);case"length":return e[1];default:var t=e[0].target,a=e[0].type;return t.hasOwnProperty(e[0].type)?isNaN(a)?e[1]:e[1][0]:e}},i.bindComputeFromStream=function(e){var t=void 0!==arguments[1]?arguments[1]:i.compute();return i.EventStream.onValue(e,t),t},i.bindMapFromStream=function(e){var t=void 0!==arguments[1]?arguments[1]:new i.Map;return i.EventStream.onValue(e,function(e){return o(t,e)}),t},i.bindListFromStream=function(e){var t=void 0!==arguments[1]?arguments[1]:new i.List;return i.EventStream.onValue(e,function(e){return s(t,e)}),t}},function(t){t.exports=e}])});
//# sourceMappingURL=can.eventstream.min.js.map