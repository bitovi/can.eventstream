!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("can"));else if("function"==typeof define&&define.amd)define(["can"],t);else{var n=t("object"==typeof exports?require("can"):e.can);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){this.event=e[0],this.which=e[1],this.how=e[2],this.value=e[3],this.oldValue=e[4]}function a(e){switch(this.event=e[0],this.event.type){case"change":this.index=isNaN(e[1])?e[1]:+e[1],this.how=e[2],this.value="remove"===this.how?e[4]:e[3],this.oldValue=e[4];break;case"set":case"add":case"remove":this.index=e[2],this.how=this.event.type,this.value=e[1],this.oldValue=null;break;default:throw new Error("Unexpected can.List event: "+this.event.type)}}function o(e,t){var n=t.hasOwnProperty("which")?t.which:t.index;switch(t.how){case"set":e.attr(n,t.value);break;case"add":e.attr(n,t.value);break;case"remove":e.removeAttr(n);break;case"replace":e.attr(t.value,t.removeOthers);break;case void 0:console.warn("Missing event type on change event: ",t),e.attr(t);break;default:console.warn("Unexpected event type: ",t.how),e.attr(t)}}function i(e,t){var n=t.hasOwnProperty("which")||isNaN(t.index);if(n&&"replace"!==t.how)o(e,t);else switch(t.how){case"set":e.attr(t.index,t.value);break;case"add":e.splice.apply(e,[t.index,0].concat(t.value));break;case"remove":e.splice(Math.min(t.index,e.length?e.length-1:0),t.value?t.value.length:1);break;case"replace":t.hasOwnProperty("removeOthers")?e.attr(t.value,t.removeOthers):e.replace(t.value);break;case void 0:console.warn("Missing event type on change event: ",t),e.replace(t.value);break;default:console.warn("Unexpected event type: ",t.how),e.replace(t.value)}}var s=n(1),u=s.bind;s.bind=function(e,t){return t&&s.isEventStream(this)?s.onEventStreamValue(this,t):t?u.apply(this,arguments):s.bindEventStream(this,e)};var c=s.delegate;s.delegate=function(e,t,n){return n?c.apply(this,arguments):s.bindEventStream(this,t,e)};var p=s.bindAndSetup;s.bindAndSetup=function(e,t){return t?p.apply(this,arguments):s.bindEventStream(this,e)};var h=s.Control.prototype.on;s.Control.prototype.on=function(e){return e&&s.isEventStream(e)?s.eventStreamUntil(e,s.bind.call(this,"destroyed")):h.apply(this,arguments)},s.Map.prototype.bind=s.bindAndSetup,s.Map.prototype.getEventValueForStream=function(e){switch(e[0]&&e[0].type){case"change":return new r(e);default:var t=e[0].target;return t._data&&t._data.hasOwnProperty(e[0].type)?e[1]:e}},s.List.prototype.getEventValueForStream=function(e){switch(e[0]&&e[0].type){case"change":case"set":case"add":case"remove":return new a(e);case"length":return e[1];default:var t=e[0].target,n=e[0].type;return t.hasOwnProperty(e[0].type)?isNaN(n)?e[1]:e[1][0]:e}},s.bindComputeFromStream=function(e){var t=void 0!==arguments[1]?arguments[1]:s.compute();return s.onEventStreamValue(e,t),t},s.bindMapFromStream=function(e){var t=void 0!==arguments[1]?arguments[1]:new s.Map;return s.onEventStreamValue(e,function(e){return o(t,e)}),t},s.bindListFromStream=function(e){var t=void 0!==arguments[1]?arguments[1]:new s.List;return s.onEventStreamValue(e,function(e){return i(t,e)}),t}},function(t){t.exports=e}])});
//# sourceMappingURL=can.eventstream.min.js.map