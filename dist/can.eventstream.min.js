!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("can"));else if("function"==typeof define&&define.amd)define(["can"],t);else{var n=t("object"==typeof exports?require("can"):e.can);for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,function(e){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){this.event=e[0],this.which=e[1],this.how=e[2],this.value=e[3],this.oldValue=e[4]}function r(e){switch(this.event=e[0],this.event.type){case"change":this.index=isNaN(e[1])?e[1]:+e[1],this.how=e[2],this.value="remove"===this.how?e[4]:e[3],this.oldValue=e[4];break;case"set":case"add":case"remove":this.index=e[2],this.how=this.event.type,this.value=e[1],this.oldValue=null;break;default:throw new Error("Unexpected can.List event: "+this.event.type)}}function i(e,t){var n=t.hasOwnProperty("which")?t.which:t.index;switch(t.how){case"set":e.attr(n,t.value);break;case"add":e.attr(n,t.value);break;case"remove":e.removeAttr(n);break;case"replace":e.attr(t.value,t.removeOthers);break;case void 0:console.warn("Missing event type on change event: ",t),e.attr(t);break;default:console.warn("Unexpected event type: ",t.how),e.attr(t)}}function s(e,t){var n=t.hasOwnProperty("which")||isNaN(t.index);if(n&&"replace"!==t.how)i(e,t);else switch(t.how){case"set":e.attr(t.index,t.value);break;case"add":t.value&&t.value.length||console.warn("'add' events sent to lists must have an array-like as their value"),e.splice.apply(e,[t.index,0].concat([t.value]));break;case"remove":e.splice(t.index,t.value?t.value.length:1);break;case"replace":t.hasOwnProperty("removeOthers")?e.attr(t.value,t.removeOthers):e.replace(t.value);break;case"splice":e.splice.apply(e,[t.index,t.howMany].concat(t.value));break;case void 0:console.warn("Missing event type on change event: ",t),e.replace(t.value);break;default:console.warn("Unexpected event type: ",t.how),e.replace(t.value)}}var o=n(1),u=o.bind;o.bind=function(e,t){return t?u.call(this,e,t):o.EventStream.bind(this,e||"change")};var c=o.delegate;o.delegate=function(e,t,n){return n?c.apply(this,arguments):o.EventStream.bind(this,t||"change",e)};var d=o.unbind;o.unbind=function(e,t){if(!t&&o.EventStream.isEventStream(e)){if(this.___unbinders)for(var n=0;n<this.___unbinders.length;n++)if(this.___unbinders[n][0]===e){this.___unbinders[n][1](),this.___unbinders.splice(n,1);break}return this}return d.apply(this,arguments)};var l=o.bindAndSetup;o.bindAndSetup=function(e,t){return t?l.apply(this,arguments):o.bind.call(this,e)};var p=o.unbindAndTeardown;o.unbindAndTeardown=function(e,t){return!t&&o.EventStream.isEventStream(e)?o.unbind.call(this,e):p.apply(this,arguments)};var h=o.Control.prototype.on;o.Control.prototype.on=function(e,t,n,a){return e?o.EventStream.isEventStream(e)?o.EventStream.untilStream(e,o.bind.call(this,"destroyed")):("string"==typeof e&&(a=n,n=t,t=e,e=this.element),void 0===a&&(a=n,n=t,t=null),null==n&&(n="change"),!a||"string"==typeof a&&!this[a]?o.EventStream.untilStream(t?o.bind.call(e,n):o.delegate.call(e,t,n),o.bind.call(this,"destroyed")):h.apply(this,arguments)):h.apply(this,arguments)},o.Map.bind=o.Map.on=o.bindAndSetup;var v=o.Map.prototype.bind;o.Map.prototype.bind=function(){var e=void 0!==arguments[0]?arguments[0]:"change",t=arguments[1];return v.call(this,e,t)},o.Map.prototype.getEventValueForStream=function(e){switch(e[0]&&e[0].type){case"change":return new a(e);default:var t=e[0].target;return t._data&&t._data.hasOwnProperty(e[0].type)?e[1]:e}},o.Map.unbind=o.Map.off=o.unbindAndTeardown;o.Map.prototype.unbind;o.Map.prototype.unbind=function(e,t){return!t&&o.EventStream.isEventStream(e)?o.unbind.call(this,e):v.apply(this,arguments)},o.List.prototype.getEventValueForStream=function(e){switch(e[0]&&e[0].type){case"change":case"set":case"add":case"remove":return new r(e);case"length":return e[1];default:var t=e[0].target,n=e[0].type;return t.hasOwnProperty(e[0].type)?isNaN(n)?e[1]:e[1][0]:e}},o.bindComputeFromStream=function(e){var t=void 0!==arguments[1]?arguments[1]:o.compute();return t.___unbinders||(t.___unbinders=[]),t.___unbinders.push([e,o.EventStream.onValue(e,t)]),t},o.bindMapFromStream=function(e){var t=void 0!==arguments[1]?arguments[1]:new o.Map;return t.___unbinders||(t.___unbinders=[]),t.___unbinders.push([e,o.EventStream.onValue(e,function(e){return i(t,e)})]),t},o.bindListFromStream=function(e){var t=void 0!==arguments[1]?arguments[1]:new o.List;return t.___unbinders||(t.___unbinders=[]),t.___unbinders.push([e,o.EventStream.onValue(e,function(e){return s(t,e)})]),t}},function(t){t.exports=e}])});
//# sourceMappingURL=can.eventstream.min.js.map